from aiogram import types
from aiogram.enums import ParseMode
import re

def escape_markdown_v2(text: str) -> str:
    """–≠–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –¥–ª—è MarkdownV2."""
    escape_chars = r"\_*[]()~`>#+-=|{}.!"
    return re.sub(f"([{re.escape(escape_chars)}])", r"\\\1", text)

async def send_about_info(message: types.Message):
    """–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ—Ç–µ –∏ –µ–≥–æ —Å–æ–∑–¥–∞—Ç–µ–ª–µ"""
    try:
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –±–æ—Ç–µ
        about_message = (
            "ü§ñ *–û –±–æ—Ç–µ:*\n"
            "–Ø ‚Äî Schedio, –≤–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –≤—Å—Ç—Ä–µ—á–∞–º–∏ –∏ —Å–æ–±—ã—Ç–∏—è–º–∏\. "
            "–Ø –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Google Calendar –∏ –ø–æ–º–æ–≥—É –≤–∞–º:\n"
            "\- –ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –≤—Å—Ç—Ä–µ—á–∞—Ö;\n"
            "\- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è, –∑–∞–≤—Ç—Ä–∞, —Ç–µ–∫—É—â–∏–µ –∏ —Å–ª–µ–¥—É—é—â–∏–µ;\n"
            "\- –°–æ–∑–¥–∞–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ Google Meet\.\n\n"
            
            "üìú *–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:*\n"
            "/start \- –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º\n"
            "/today \- –°–æ–±—ã—Ç–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è\n"
            "/tomorrow \- –°–æ–±—ã—Ç–∏—è –Ω–∞ –∑–∞–≤—Ç—Ä–∞\n"
            "/now \- –¢–µ–∫—É—â–∞—è –≤—Å—Ç—Ä–µ—á–∞\n"
            "/next \- –°–ª–µ–¥—É—é—â–∞—è –≤—Å—Ç—Ä–µ—á–∞\n"
            "/generate\_meet\_link \- –°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ Google Meet\n\n"
            "/set\_reminder\_0 \- –ù–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –≤—Å—Ç—Ä–µ—á–∞—Ö –∑–∞ 0 –º–∏–Ω—É—Ç\n"
            "/set\_reminder\_5 \- –ù–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –≤—Å—Ç—Ä–µ—á–∞—Ö –∑–∞ 5 –º–∏–Ω—É—Ç\n"
            "/set\_reminder\_10 \- –ù–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –≤—Å—Ç—Ä–µ—á–∞—Ö –∑–∞ 10 –º–∏–Ω—É—Ç\n"
            "/set\_reminder\_15 \- –ù–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –≤—Å—Ç—Ä–µ—á–∞—Ö –∑–∞ 15 –º–∏–Ω—É—Ç\n\n"
            "/relogin \- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è\n"
            "/logout \- –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ Google –∏ —É–¥–∞–ª–∏—Ç—å —Ç–æ–∫–µ–Ω –∏–∑ Schedio\n"
            "/about \- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ\n\n"
            
            f"üí≤–û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ–Ω–∞—Ç: [{escape_markdown_v2('Cloudtips')}]({escape_markdown_v2('https://pay.cloudtips.ru/p/2258c26e')})\n\n"

            "üë®‚Äçüíª *–°–≤—è–∑—å —Å —Å–æ–∑–¥–∞—Ç–µ–ª–µ–º:*\n"
            "–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ:\n"
            f"\- Telegram: [{escape_markdown_v2('@IlyaDoroshev')}]({escape_markdown_v2('https://t.me/IlyaDoroshev')})\n"
            f"\- Email\: {escape_markdown_v2('feedback@schedio.ru')}\n\n"
            "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ *Schedio*\! ‚ù§Ô∏è"
        )

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        await message.reply(
            text=about_message,
            parse_mode=ParseMode.MARKDOWN_V2,
            disable_web_page_preview=True  # –û—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Å—ã–ª–æ–∫
        )
    except Exception as e:
        await message.reply(f"‚ùå –û—à–∏–±–∫–∞: {str(e)}")